import{z as x,u as g,r as p,D as f,j as a,a as r,V as j,W as v}from"./index-81acd1b8.js";import{S as y}from"./react-select.esm-eb3a80e8.js";import"./assertThisInitialized-1ff85cc6.js";const b=[{name:"Video",permissions:["create","update","view","delete"]},{name:"Nutrition",permissions:["create","update","view","delete"]},{name:"Meal",permissions:["create","update","view","delete"]}],E=({editUserId:t=null})=>{const i=x(),{users:d,loading:C}=g(e=>e.users||{users:[]}),[l,o]=p.useState({name:"",email:"",password:"",role:"host",permissions:{}});p.useEffect(()=>{if(i(f()),t){const e=d.find(s=>s.id===t);e&&o({name:e.name||"",email:e.email||"",role:e.role||"admin",permissions:e.permissions||{}})}},[i,t,d]);const c=e=>{const{name:s,value:n}=e.target;o(m=>({...m,[s]:n}))},u=(e,s)=>{o(n=>{var m;return{...n,permissions:{...n.permissions,[e]:{...n.permissions[e],[s]:!((m=n.permissions[e])!=null&&m[s])}}}})},h=()=>{t?(i(j({id:t,data:l})),alert("User updated successfully!")):(i(v(l)),alert("User created successfully!"))};return a.jsx("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:a.jsxs(r.Card,{children:[a.jsx(r.CardHeader,{variant:"gradient",color:"gray",className:"mb-8 p-6",children:a.jsx(r.Typography,{variant:"h6",color:"white",children:t?"Edit User Permissions":"Create New User"})}),a.jsxs(r.CardBody,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx(r.Input,{type:"text",name:"name",label:"Name",value:l.name,onChange:c,required:!0}),a.jsx(r.Input,{type:"email",name:"email",label:"Email",value:l.email,onChange:c,required:!0}),a.jsx(r.Input,{type:"password",name:"password",label:"Password",value:l.password,onChange:c,required:!0}),a.jsx(y,{value:{label:l.role,value:l.role},options:[{label:"Host",value:"host"}],onChange:e=>o(s=>({...s,role:e.value}))})]}),a.jsxs("div",{children:[a.jsx(r.Typography,{variant:"small",className:"text-gray-600 font-bold mb-2",children:"Assign Permissions"}),b.map(e=>a.jsxs("div",{className:"mb-6",children:[a.jsx(r.Typography,{variant:"small",className:"text-gray-800 font-semibold",children:e.name}),a.jsx("div",{className:"flex flex-wrap gap-4 mt-2",children:e.permissions.map(s=>{var n;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(r.Typography,{variant:"small",children:s}),a.jsx(r.Switch,{checked:((n=l.permissions[e.name])==null?void 0:n[s])||!1,onChange:()=>u(e.name,s)})]},s)})})]},e.name))]}),a.jsx(r.Button,{onClick:h,variant:"gradient",color:"blue",disabled:!l.name||!l.email,children:t?"Update User":"Create User"})]})]})})};export{E as default};
