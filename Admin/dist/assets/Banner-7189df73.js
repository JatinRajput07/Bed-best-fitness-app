import{g as K,d as V,r as n,e as $,f as y,m as q,u as G,j as e,c as L,h as J,a as r,l as M}from"./index-611eecad.js";import{B as Q,M as Z,u as ee,F as ae,T as te,a as oe,b as se,c as H,d as i,e as re,f as le}from"./TableRow-41401bcf.js";import{S as ne}from"./Switch-e0e4f186.js";import{P as X,d as ie}from"./Paper-066aa710.js";import"./assertThisInitialized-a157bb13.js";function ce(o){return K("MuiDialog",o)}const de=V("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),z=de,pe=n.createContext({}),ue=pe,he=$(Q,{name:"MuiDialog",slot:"Backdrop",overrides:(o,a)=>a.backdrop})({zIndex:-1}),ge=o=>{const{classes:a,scroll:l,maxWidth:c,fullWidth:d,fullScreen:g}=o,j={root:["root"],container:["container",`scroll${y(l)}`],paper:["paper",`paperScroll${y(l)}`,`paperWidth${y(String(c))}`,d&&"paperFullWidth",g&&"paperFullScreen"]};return J(j,ce,a)},me=$(Z,{name:"MuiDialog",slot:"Root",overridesResolver:(o,a)=>a.root})({"@media print":{position:"absolute !important"}}),xe=$("div",{name:"MuiDialog",slot:"Container",overridesResolver:(o,a)=>{const{ownerState:l}=o;return[a.container,a[`scroll${y(l.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),fe=$(X,{name:"MuiDialog",slot:"Paper",overridesResolver:(o,a)=>{const{ownerState:l}=o;return[a.paper,a[`scrollPaper${y(l.scroll)}`],a[`paperWidth${y(String(l.maxWidth))}`],l.fullWidth&&a.paperFullWidth,l.fullScreen&&a.paperFullScreen]}})(q(({theme:o})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:a})=>!a.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:o.breakpoints.unit==="px"?Math.max(o.breakpoints.values.xs,444):`max(${o.breakpoints.values.xs}${o.breakpoints.unit}, 444px)`,[`&.${z.paperScrollBody}`]:{[o.breakpoints.down(Math.max(o.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(o.breakpoints.values).filter(a=>a!=="xs").map(a=>({props:{maxWidth:a},style:{maxWidth:`${o.breakpoints.values[a]}${o.breakpoints.unit}`,[`&.${z.paperScrollBody}`]:{[o.breakpoints.down(o.breakpoints.values[a]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:a})=>a.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:a})=>a.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${z.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),be=n.forwardRef(function(a,l){const c=G({props:a,name:"MuiDialog"}),d=ie(),g={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":j,"aria-labelledby":k,"aria-modal":R=!0,BackdropComponent:v,BackdropProps:A,children:S,className:B,disableEscapeKeyDown:C=!1,fullScreen:m=!1,fullWidth:P=!1,maxWidth:p="sm",onBackdropClick:W,onClick:N,onClose:w,open:x,PaperComponent:I=X,PaperProps:u={},scroll:F="paper",TransitionComponent:U=ae,transitionDuration:T=g,TransitionProps:D,...E}=c,f={...c,disableEscapeKeyDown:C,fullScreen:m,fullWidth:P,maxWidth:p,scroll:F},t=ge(f),s=n.useRef(),h=b=>{s.current=b.target===b.currentTarget},Y=b=>{N&&N(b),s.current&&(s.current=null,W&&W(b),w&&w(b,"backdropClick"))},O=ee(k),_=n.useMemo(()=>({titleId:O}),[O]);return e.jsx(me,{className:L(t.root,B),closeAfterTransition:!0,components:{Backdrop:he},componentsProps:{backdrop:{transitionDuration:T,as:v,...A}},disableEscapeKeyDown:C,onClose:w,open:x,ref:l,onClick:Y,ownerState:f,...E,children:e.jsx(U,{appear:!0,in:x,timeout:T,role:"presentation",...D,children:e.jsx(xe,{className:L(t.container),onMouseDown:h,ownerState:f,children:e.jsx(fe,{as:I,elevation:24,role:"dialog","aria-describedby":j,"aria-labelledby":O,"aria-modal":R,...u,className:L(t.paper,u.className),ownerState:f,children:e.jsx(ue.Provider,{value:_,children:S})})})})})}),ye=be,ke=()=>{const[o,a]=n.useState([]),[l,c]=n.useState(null),[d,g]=n.useState(null),[j,k]=n.useState(!1),[R,v]=n.useState(!1),[A,S]=n.useState(null),[B,C]=n.useState(!1),[m,P]=n.useState(0),[p,W]=n.useState(5),N=t=>{const s=t.target.files[0];c(s);const h=URL.createObjectURL(s);g(h)},w=()=>k(!0),x=()=>{c(null),g(null),k(!1)},I=()=>{if(!l)return;C(!0);const t=new FormData;t.append("image",l),M.post("http://43.204.2.84:7200/admin/banner",t).then(s=>{s.data.status==="success"&&(u(),x())}).catch(s=>{console.error("Error submitting banner:",s)}).finally(()=>C(!1))},u=()=>{M.get("http://43.204.2.84:7200/admin/banner").then(t=>{t.data.status==="success"&&Array.isArray(t.data.data)?a(t.data.data):a([])}).catch(t=>{console.error("Error fetching banners:",t),a([])})},F=(t,s)=>{M.patch(`http://43.204.2.84:7200/admin/banner/${t}/status`,{isActive:!s}).then(h=>{h.data.status==="success"&&u()}).catch(h=>{console.error("Error toggling banner status:",h)})},U=t=>{M.delete(`http://43.204.2.84:7200/admin/banner/${t}`).then(s=>{s.data.status==="success"&&(u(),v(!1))}).catch(s=>{console.error("Error deleting banner:",s)})},T=t=>{S(t),v(!0)},D=()=>{v(!1),S(null)};n.useEffect(()=>{u()},[]);const E=(t,s)=>{P(s)},f=t=>{W(parseInt(t.target.value,10)),P(0)};return e.jsxs("div",{className:"mt-12 mb-8 flex justify-center",children:[e.jsxs(r.Card,{className:"w-full max-w-6xl shadow-lg",children:[e.jsxs(r.CardHeader,{variant:"gradient",className:"bg-gradient-to-r from-blue-800 to-indigo-600 p-6 rounded-t-lg flex justify-between items-center",children:[e.jsx(r.Typography,{variant:"h5",color:"white",children:"Banner Management"}),e.jsx(r.Button,{color:"lightBlue",onClick:w,children:"Add Banner"})]}),e.jsxs(r.CardBody,{className:"p-6 space-y-6",children:[e.jsx(te,{children:e.jsxs(oe,{children:[e.jsx(se,{children:e.jsxs(H,{children:[e.jsx(i,{children:"Sr. No."}),e.jsx(i,{children:"Image"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(re,{children:o&&o.length>0&&o.slice(m*p,m*p+p).map((t,s)=>e.jsxs(H,{children:[e.jsx(i,{children:m*p+s+1}),e.jsx(i,{children:e.jsx("img",{src:t.imageUrl,alt:"Banner",className:"w-32 h-32 object-cover rounded-md"})}),e.jsx(i,{children:e.jsx(ne,{checked:t.isActive,onChange:()=>F(t._id,t.isActive)})}),e.jsx(i,{children:e.jsx(r.Button,{color:"red",size:"small",onClick:()=>T(t._id),children:"Delete"})})]},t._id))})]})}),e.jsx(le,{rowsPerPageOptions:[5,10,25],component:"div",count:o.length,rowsPerPage:p,page:m,onPageChange:E,onRowsPerPageChange:f})]})]}),e.jsxs(r.Dialog,{open:j,handler:x,size:"lg",children:[e.jsx(r.DialogBody,{className:"overflow-y-auto overflow-x-hidden max-h-[500px]",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsx(r.Typography,{variant:"h4",className:"text-gray-800 font-semibold",children:"Upload New Banner"}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose Image"}),e.jsx("input",{type:"file",onChange:N,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 focus:outline-none"})]}),d&&e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(r.Typography,{variant:"h6",color:"blue-gray",className:"mb-2",children:"Image Preview"}),e.jsx("img",{src:d,alt:"Preview",className:"w-full h-auto object-cover rounded-md shadow-md"})]})]})}),e.jsxs(r.DialogFooter,{className:"flex justify-between",children:[e.jsx(r.Button,{variant:"outlined",color:"red",onClick:x,children:"Cancel"}),e.jsx(r.Button,{variant:"filled",color:"green",onClick:I,disabled:B,children:B?"Uploading...":"Submit"})]})]}),e.jsxs(ye,{open:R,onClose:D,children:[e.jsx(r.DialogBody,{children:e.jsx(r.Typography,{variant:"h6",className:"text-gray-800",children:"Are you sure you want to delete this banner?"})}),e.jsxs(r.DialogFooter,{className:"gap-1",children:[e.jsx(r.Button,{variant:"outlined",color:"red",onClick:D,children:"Cancel"}),e.jsx(r.Button,{variant:"filled",color:"green",onClick:()=>{U(A),D()},children:"Delete"})]})]})]})};export{ke as default};
