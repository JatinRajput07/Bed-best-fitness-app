import{r as l,j as e,a as s,A as c}from"./index-87c3bf63.js";import{S as F,N as V,P as _,a as M,b as $,D as q}from"./pagination-f9ecec68.js";import{T as G,a as J,b as K,c as B,d as Q}from"./TableRow-36675862.js";import{T as t,a as W}from"./TablePagination-7fa9cdcf.js";import"./Paper-be475629.js";import"./assertThisInitialized-39685eac.js";const ne=()=>{const[d,S]=l.useState([]),[x,u]=l.useState(null),[j,p]=l.useState(null),[D,f]=l.useState(!1),[P,v]=l.useState(!1),[k,b]=l.useState(null),[w,C]=l.useState(!1),[i,N]=l.useState(0),[r,T]=l.useState(5),[h,y]=l.useState(""),o=()=>{c.get("/admin/banner").then(a=>{a.data.status==="success"&&Array.isArray(a.data.data)&&S(a.data.data)}).catch(a=>console.error("Error fetching banners:",a))};l.useEffect(()=>{o()},[]);const A=a=>{const n=a.target.files[0];u(n),p(URL.createObjectURL(n))},I=()=>f(!0),m=()=>{u(null),p(null),y(""),f(!1)},R=a=>{b(a),v(!0)},g=()=>{v(!1),b(null)},E=()=>{if(!x)return;C(!0);const a=new FormData;a.append("image",x),h&&a.append("link",h),c.post("/admin/banner",a).then(n=>{n.data.status==="success"&&(o(),m())}).catch(n=>console.error("Error creating banner:",n)).finally(()=>C(!1))},O=(a,n)=>{c.patch(`/admin/banner/${a}/status`,{isActive:!n}).then(()=>o()).catch(z=>console.error("Error toggling banner status:",z))},L=a=>{c.delete(`/admin/banner/${a}`).then(()=>{o(),g()}).catch(n=>console.error("Error deleting banner:",n))},H=(a,n)=>N(n),U=a=>{T(parseInt(a.target.value,10)),N(0)};return e.jsxs("div",{className:"mt-12 mb-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(s.Typography,{variant:"h5",className:"mb-4 font-bold text-center",children:"Active Banners"}),e.jsx(F,{navigation:!0,pagination:{clickable:!0},modules:[V,_],className:"h-64",children:d.filter(a=>a.isActive).map(a=>e.jsx(M,{children:e.jsx("img",{src:a.imageUrl,alt:"Banner",className:"w-full h-full object-cover rounded-md"})},a._id))})]}),e.jsxs(s.Card,{className:"w-full shadow-lg",children:[e.jsxs(s.CardHeader,{className:"p-6 bg-blue-600 text-white flex justify-between",children:[e.jsx(s.Typography,{variant:"h5",children:"Banner Management"}),e.jsx(s.Button,{onClick:I,children:"Add Banner"})]}),e.jsxs(s.CardBody,{className:"p-6",children:[e.jsx(G,{children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsxs(B,{children:[e.jsx(t,{children:"Sr. No."}),e.jsx(t,{children:"Image"}),e.jsx(t,{children:"Link"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(Q,{children:d.slice(i*r,i*r+r).map((a,n)=>e.jsxs(B,{children:[e.jsx(t,{children:i*r+n+1}),e.jsx(t,{children:e.jsx("img",{src:a.imageUrl,alt:"Banner",className:"w-32 h-32 object-cover rounded-md"})}),e.jsx(t,{children:(a==null?void 0:a.link)??"-"}),e.jsx(t,{children:e.jsx($,{checked:a.isActive,onChange:()=>O(a._id,a.isActive)})}),e.jsx(t,{children:e.jsx(s.Button,{color:"red",onClick:()=>R(a._id),children:"Delete"})})]},a._id))})]})}),e.jsx(W,{rowsPerPageOptions:[5,10,25],component:"div",count:d.length,rowsPerPage:r,page:i,onPageChange:H,onRowsPerPageChange:U})]})]}),e.jsxs(s.Dialog,{open:D,handler:m,children:[e.jsxs(s.DialogBody,{className:"flex flex-col items-center p-6",children:[e.jsx(s.Typography,{variant:"h4",className:"mb-6 font-semibold",children:"Add New Banner"}),e.jsxs("div",{className:"mb-4 w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner Image"}),e.jsxs("div",{className:"flex items-center justify-center border-2 border-dashed border-gray-400 rounded-lg p-4",children:[e.jsx("input",{type:"file",id:"image-upload",className:"hidden",onChange:A}),e.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:j?e.jsx("img",{src:j,alt:"Banner Preview",className:"max-w-xs max-h-48 rounded-lg object-cover"}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-4xl text-primary",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-10 h-10",children:e.jsx("path",{fillRule:"evenodd",d:"M7 4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v1h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2V4zm1 2v1h8V6H8zm-2 3v8h12V9H6zm6 1a3 3 0 1 1 0 6 3 3 0 0 1 0-6z",clipRule:"evenodd"})})}),e.jsx(s.Typography,{variant:"small",className:"mt-2 text-gray-600",children:"Select Image"})]})})]})]}),e.jsx(s.Input,{label:"Link (Optional)",value:h,onChange:a=>y(a.target.value),className:"mb-4 w-full"})]}),e.jsxs(s.DialogFooter,{className:"p-6",children:[e.jsx(s.Button,{onClick:m,color:"red",variant:"text",className:"mr-2",children:"Cancel"}),e.jsx(s.Button,{onClick:E,color:"green",disabled:w,children:w?"Uploading...":"Submit"})]})]}),e.jsxs(q,{open:P,onClose:g,children:[e.jsx(s.DialogBody,{children:e.jsx(s.Typography,{children:"Are you sure you want to delete this banner?"})}),e.jsxs(s.DialogFooter,{children:[e.jsx(s.Button,{onClick:g,color:"red",children:"Cancel"}),e.jsx(s.Button,{onClick:()=>L(k),color:"green",children:"Delete"})]})]})]})};export{ne as default};
