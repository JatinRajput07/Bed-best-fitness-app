import{r as l,j as e,a as t,A as T,_ as X}from"./index-a4e2d8df.js";import{T as Y,a as Z,b as ee,c as W,d as se}from"./TableRow-80ebec62.js";import{T as n,a as te}from"./TablePagination-ceeab827.js";import"./Paper-7e39cf82.js";import"./assertThisInitialized-43bc084c.js";const ce=()=>{const[f,S]=l.useState(null),[y,d]=l.useState(""),[g,m]=l.useState([]),[i,h]=l.useState(""),[v,u]=l.useState(""),[F,P]=l.useState(!1),[B,x]=l.useState(null),[I,R]=l.useState(!1),[E,_]=l.useState([]),[N,A]=l.useState(0),[p,O]=l.useState(5),[c,w]=l.useState(null),[k,j]=l.useState(null),[C,b]=l.useState(""),[o,q]=l.useState({googleMeetLink:"",roles:"",meetingDate:"",meetingTime:"",category:"",image:""}),U=s=>{const a=s.target.files[0];S(a);const r=URL.createObjectURL(a);x(r)},z=s=>{m(a=>a.includes(s)?a.filter(r=>r!==s):[...a,s])},H=(s=null)=>{s?(w(s),d(s.googleMeetLink),m(s.roles[0].split(",")),h(s.meetingDate),u(s.meetingTime),x(s.image),b(s.category)):(w(null),d(""),m([]),h(""),u(""),x(null),b("")),P(!0)},M=()=>{S(null),d(""),m([]),h(""),u(""),x(null),b(""),P(!1),w(null)},V=()=>{q({googleMeetLink:"",roles:"",meetingDate:"",meetingTime:"",category:"",image:""});let s=!1;const a={};if(y.trim()||(a.googleMeetLink="Meet link is required",s=!0),g.length===0&&(a.roles="Please select at least one role",s=!0),i||(a.meetingDate="Meeting date is required",s=!0),v||(a.meetingTime="Meeting time is required",s=!0),C||(a.category="Category is required",s=!0),!c&&!f&&(a.image="Image is required",s=!0),s){q(a);return}R(!0);const r=new FormData;r.append("googleMeetLink",y),r.append("roles",g),r.append("meetingDate",i),r.append("meetingTime",v),r.append("category",C),f&&r.append("image",f);const Q=c?`/admin/updateMeeting/${c._id}`:"/admin/createMeeting";T[c?"put":"post"](Q,r).then(D=>{D.data.status==="success"&&(L(),M())}).catch(D=>{console.error("Error submitting meeting:",D)}).finally(()=>R(!1))},L=()=>{T.get("/admin/getMeeting").then(s=>{s.data.status==="success"&&_(s.data.meeting)}).catch(s=>{console.error("Error fetching meetings:",s)})};l.useEffect(()=>{L()},[]);const $=s=>{j(s)},G=()=>{k&&T.delete(`/admin/deleteMeeting/${k}`).then(s=>{s.data.status==="success"&&(L(),X.success("Meeting Deleted!"))}).catch(s=>{console.error("Error deleting meeting:",s)}).finally(()=>j(null))},K=(s,a)=>{A(a)},J=s=>{O(parseInt(s.target.value,10)),A(0)};return e.jsxs("div",{className:"mt-12 mb-8 flex justify-center",children:[e.jsxs(t.Card,{className:"w-full max-w-7xl shadow-2xl",children:[e.jsxs(t.CardHeader,{variant:"gradient",className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-t-lg flex justify-between items-center",children:[e.jsx(t.Typography,{variant:"h4",color:"white",className:"font-bold",children:"Meeting Management"}),e.jsxs(t.Button,{className:"flex items-center gap-2 px-6 py-3 bg-white text-blue-600 hover:bg-blue-50 transition-all",onClick:()=>H(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Meeting"]})]}),e.jsxs(t.CardBody,{className:"p-6 space-y-6",children:[e.jsx(Y,{className:"shadow-md rounded-lg",children:e.jsxs(Z,{className:"min-w-full",children:[e.jsx(ee,{children:e.jsxs(W,{className:"bg-gray-100",children:[e.jsx(n,{className:"font-bold",children:"Sr. No."}),e.jsx(n,{className:"font-bold",children:"Image"}),e.jsx(n,{className:"font-bold",children:"Meet Link"}),e.jsx(n,{className:"font-bold",children:"Date"}),e.jsx(n,{className:"font-bold",children:"Time"}),e.jsx(n,{className:"font-bold",children:"Roles"}),e.jsx(n,{className:"font-bold",children:"Category"}),e.jsx(n,{className:"font-bold",children:"Actions"})]})}),e.jsx(se,{children:E.slice(N*p,N*p+p).map((s,a)=>e.jsxs(W,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(n,{children:a+1}),e.jsx(n,{children:e.jsx("img",{src:s.image,alt:"Meeting",className:"w-20 h-20 object-cover rounded-lg shadow-sm"})}),e.jsx(n,{className:"max-w-xs truncate",children:s.googleMeetLink}),e.jsx(n,{children:new Date(s.meetingDate).toLocaleDateString()}),e.jsx(n,{children:s.meetingTime}),e.jsx(n,{children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:s.roles.map(r=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:r},r))})}),e.jsx(n,{children:e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full",children:s.category})}),e.jsx(n,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t.Button,{size:"sm",className:"bg-green-500 hover:bg-green-600 flex items-center gap-1",onClick:()=>H(s),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),"Edit"]}),e.jsxs(t.Button,{size:"sm",className:"bg-red-500 hover:bg-red-600 flex items-center gap-1",onClick:()=>$(s._id),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),"Delete"]})]})})]},s._id))})]})}),e.jsx(te,{className:"mt-4",rowsPerPageOptions:[5,10,25],component:"div",count:E.length,rowsPerPage:p,page:N,onPageChange:K,onRowsPerPageChange:J})]})]}),e.jsxs(t.Dialog,{open:F,handler:M,size:"lg",children:[e.jsx(t.DialogBody,{className:"max-h-[80vh] overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(t.Typography,{variant:"h4",className:"text-center mb-6 text-blue-600",children:c?"Edit Meeting":"Add New Meeting"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t.Input,{label:"Meet Link",value:y,onChange:s=>d(s.target.value),className:"!border-t-blue-gray-200 focus:!border-t-blue-500",labelProps:{className:"before:content-none after:content-none"},required:!0}),o.googleMeetLink&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.googleMeetLink})]}),e.jsxs("div",{children:[e.jsx(t.Typography,{variant:"h6",className:"text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:C,onChange:s=>b(s.target.value),className:"w-full p-3 border rounded-lg focus:border-blue-500 outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"story",children:"Story"}),e.jsx("option",{value:"workout",children:"Workout"}),e.jsx("option",{value:"knowledge",children:"Knowledge"}),e.jsx("option",{value:"postcast",children:"Postcast"}),e.jsx("option",{value:"recipe",children:"Recipe"})]}),o.category&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.category})]}),e.jsxs("div",{children:[e.jsx(t.Typography,{variant:"h6",className:"text-gray-700 mb-2",children:"Roles"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(t.Checkbox,{label:"User",checked:g.includes("user"),onChange:()=>z("user"),className:"checked:bg-blue-500"}),e.jsx(t.Checkbox,{label:"Coach",checked:g.includes("coach"),onChange:()=>z("coach"),className:"checked:bg-blue-500"})]}),o.roles&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.roles})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t.Typography,{variant:"h6",className:"text-gray-700 mb-2",children:"Meeting Schedule"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t.Input,{type:"date",label:"Date",value:i==null?void 0:i.split("T")[0],onChange:s=>h(s.target.value),className:"!border-t-blue-gray-200 focus:!border-t-blue-500",required:!0}),e.jsx(t.Input,{type:"time",label:"Time",value:v,onChange:s=>u(s.target.value),className:"!border-t-blue-gray-200 focus:!border-t-blue-500",required:!0})]}),(o.meetingDate||o.meetingTime)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.meetingDate||o.meetingTime})]}),e.jsxs("div",{children:[e.jsx(t.Typography,{variant:"h6",className:"text-gray-700 mb-2",children:"Meeting Image"}),e.jsx(t.Input,{type:"file",onChange:U,className:"!border-t-blue-gray-200 focus:!border-t-blue-500",accept:"image/*"}),B&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:B,alt:"Preview",className:"w-full h-40 object-cover rounded-lg shadow-md"})}),o.image&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.image})]})]})]})]})}),e.jsxs(t.DialogFooter,{className:"sticky bottom-0 bg-white py-4 px-6 border-t flex justify-end gap-4",children:[e.jsx(t.Button,{variant:"outlined",color:"red",onClick:M,className:"flex items-center gap-2",children:"Cancel"}),e.jsx(t.Button,{color:"blue",onClick:V,disabled:I,className:"flex items-center gap-2",children:I?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit"]})})]})]}),e.jsxs(t.Dialog,{open:!!k,handler:()=>j(null),children:[e.jsxs(t.DialogBody,{className:"flex flex-col items-center gap-6 p-6",children:[e.jsx(t.Typography,{variant:"h6",className:"text-center",children:"Confirm Deletion"}),e.jsx(t.Typography,{className:"text-center text-blue-gray-600",children:"Are you sure you want to delete this meeting?"})]}),e.jsxs(t.DialogFooter,{className:"flex justify-center gap-4",children:[e.jsx(t.Button,{variant:"outlined",color:"blue-gray",onClick:()=>j(null),children:"Cancel"}),e.jsx(t.Button,{variant:"gradient",color:"red",onClick:G,children:"Confirm"})]})]})]})};export{ce as default};
