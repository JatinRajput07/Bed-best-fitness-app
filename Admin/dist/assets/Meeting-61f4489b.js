import{r as n,j as e,a,A as S,_ as J}from"./index-313bb403.js";import{T as Q,a as V,b as X,c as _,d as Y}from"./TableRow-3a4c6a93.js";import{T as s,a as Z}from"./TablePagination-8f3227b3.js";import"./Paper-34cfe14a.js";import"./assertThisInitialized-7e86d97b.js";const le=()=>{const[k,N]=n.useState(null),[y,i]=n.useState(""),[o,c]=n.useState([]),[r,d]=n.useState(""),[f,g]=n.useState(""),[q,P]=n.useState(!1),[B,h]=n.useState(null),[I,R]=n.useState(!1),[L,O]=n.useState([]),[v,E]=n.useState(0),[u,z]=n.useState(5),[x,C]=n.useState(null),[b,j]=n.useState(null),[w,m]=n.useState(""),F=t=>{const l=t.target.files[0];N(l);const p=URL.createObjectURL(l);h(p)},A=t=>{c(l=>l.includes(t)?l.filter(p=>p!==t):[...l,t])},U=(t=null)=>{t?(C(t),i(t.googleMeetLink),c(t.roles[0].split(",")),d(t.meetingDate),g(t.meetingTime),h(t.image),m(t.category)):(C(null),i(""),c([]),d(""),g(""),h(null),m("")),P(!0)},M=()=>{N(null),i(""),c([]),d(""),g(""),h(null),m(""),P(!1),C(null)},H=()=>{if(!y||o.length===0||!r||!f||!w)return;R(!0);const t=new FormData;t.append("googleMeetLink",y),t.append("roles",o),t.append("meetingDate",r),t.append("meetingTime",f),t.append("category",w),k&&t.append("image",k);const l=x?`/admin/updateMeeting/${x._id}`:"/admin/createMeeting";S[x?"put":"post"](l,t).then(T=>{T.data.status==="success"&&(D(),M())}).catch(T=>{console.error("Error submitting meeting:",T)}).finally(()=>R(!1))},D=()=>{S.get("/admin/getMeeting").then(t=>{t.data.status==="success"&&O(t.data.meeting)}).catch(t=>{console.error("Error fetching meetings:",t)})};n.useEffect(()=>{D()},[]);const $=t=>{j(t)},G=()=>{b&&S.delete(`/admin/deleteMeeting/${b}`).then(t=>{t.data.status==="success"&&(D(),J.success("Meeting Deleted!"))}).catch(t=>{console.error("Error deleting meeting:",t)}).finally(()=>j(null))},K=(t,l)=>{E(l)},W=t=>{z(parseInt(t.target.value,10)),E(0)};return e.jsxs("div",{className:"mt-12 mb-8 flex justify-center",children:[e.jsxs(a.Card,{className:"w-full max-w-6xl shadow-lg",children:[e.jsxs(a.CardHeader,{variant:"gradient",className:"bg-gradient-to-r from-blue-800 to-indigo-600 p-6 rounded-t-lg flex justify-between items-center",children:[e.jsx(a.Typography,{variant:"h5",color:"white",children:"Meeting"}),e.jsx(a.Button,{color:"lightBlue",onClick:()=>U(),children:"Add Meeting"})]}),e.jsxs(a.CardBody,{className:"p-6 space-y-6",children:[e.jsx(Q,{children:e.jsxs(V,{children:[e.jsx(X,{children:e.jsxs(_,{children:[e.jsx(s,{children:"Sr. No."}),e.jsx(s,{children:"Image"}),e.jsx(s,{children:"Meet Link"}),e.jsx(s,{children:"Date"}),e.jsx(s,{children:"Time"}),e.jsx(s,{children:"Roles"}),e.jsx(s,{children:"Category"}),e.jsx(s,{children:"Actions"})]})}),e.jsx(Y,{children:L.slice(v*u,v*u+u).map((t,l)=>e.jsxs(_,{children:[e.jsx(s,{children:l+1}),e.jsx(s,{children:e.jsx("img",{src:t.image,alt:"Meeting",className:"w-16 h-16 object-cover"})}),e.jsx(s,{children:t.googleMeetLink}),e.jsx(s,{children:new Date(t.createdAt).toLocaleDateString()}),e.jsx(s,{children:new Date(t.createdAt).toLocaleTimeString()}),e.jsx(s,{children:t.roles.join(", ")}),e.jsx(s,{children:t.category}),e.jsxs(s,{children:[e.jsx(a.Button,{size:"sm",color:"green",className:"mr-1",onClick:()=>U(t),children:"Edit"}),e.jsx(a.Button,{size:"sm",color:"red",onClick:()=>$(t._id),children:"Delete"})]})]},t._id))})]})}),e.jsx(Z,{rowsPerPageOptions:[5,10,25],component:"div",count:L.length,rowsPerPage:u,page:v,onPageChange:K,onRowsPerPageChange:W})]})]}),e.jsxs(a.Dialog,{open:q,handler:M,size:"lg",children:[e.jsx(a.DialogBody,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(a.Typography,{variant:"h6",className:"text-center mb-4",children:x?"Edit Meeting":"Add Meeting"}),e.jsx(a.Input,{label:"Meet Link",value:y,onChange:t=>i(t.target.value),required:!0}),e.jsx(a.Input,{type:"file",onChange:F,label:"Upload Image"}),B&&e.jsxs("div",{className:"mt-4",children:[e.jsx(a.Typography,{variant:"h6",color:"gray",className:"mb-2",children:"Image Preview"}),e.jsx("img",{src:B,alt:"Preview",className:"w-32 h-32 object-cover rounded-md"})]}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",className:"text-gray-700",children:"Select Category"}),e.jsxs("select",{value:w,onChange:t=>m(t.target.value),className:"w-full p-2 border rounded-md",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"story",children:"Story"}),e.jsx("option",{value:"workout",children:"Workout"}),e.jsx("option",{value:"knowledge",children:"Knowledge"}),e.jsx("option",{value:"postcast",children:"Postcast"}),e.jsx("option",{value:"recipe",children:"Recipe"})]})]}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",className:"text-gray-700",children:"Select Roles"}),e.jsx(a.Checkbox,{label:"User",checked:o.includes("user"),onChange:()=>A("user")}),e.jsx(a.Checkbox,{label:"Coach",checked:o.includes("coach"),onChange:()=>A("coach")})]}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h6",className:"text-gray-700",children:"Select Meeting Date and Time"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(a.Input,{type:"date",label:"Date",value:r==null?void 0:r.split("T")[0],onChange:t=>d(t.target.value),required:!0}),e.jsx(a.Input,{type:"time",label:"Time",value:f,onChange:t=>g(t.target.value),required:!0})]})]})]})}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{color:"red",onClick:M,children:"Cancel"}),e.jsx(a.Button,{color:"blue",onClick:H,disabled:I,children:I?"Please wait...":"Submit"})]})]}),e.jsxs(a.Dialog,{open:!!b,handler:()=>j(null),children:[e.jsxs(a.DialogBody,{className:"flex flex-col items-center gap-6 p-6",children:[e.jsx(a.Typography,{variant:"h6",className:"text-center",children:"Confirm Deletion"}),e.jsx(a.Typography,{className:"text-center text-blue-gray-600",children:"Are you sure you want to delete this meeting?"})]}),e.jsxs(a.DialogFooter,{className:"flex justify-center gap-4",children:[e.jsx(a.Button,{variant:"outlined",color:"blue-gray",onClick:()=>j(null),children:"Cancel"}),e.jsx(a.Button,{variant:"gradient",color:"red",onClick:G,children:"Confirm"})]})]})]})};export{le as default};
