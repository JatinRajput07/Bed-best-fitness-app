import{r as n,j as e,a as s,D as h}from"./index-3b9d563d.js";import{T as L,a as _,b as z,c as D,d as l,e as H,f as M}from"./TableRow-2f563d44.js";import{S as $,D as q}from"./Switch-7895af7b.js";import"./Select-53d60abe.js";import"./assertThisInitialized-0b784a73.js";const W=()=>{const[i,g]=n.useState([]),[f,j]=n.useState(null),[p,b]=n.useState(null),[N,w]=n.useState(!1),[P,m]=n.useState(!1),[S,y]=n.useState(null),[v,C]=n.useState(!1),[c,B]=n.useState(0),[r,T]=n.useState(5),k=a=>{const t=a.target.files[0];j(t);const o=URL.createObjectURL(t);b(o)},I=()=>w(!0),u=()=>{j(null),b(null),w(!1)},A=()=>{if(!f)return;C(!0);const a=new FormData;a.append("image",f),h.post("http://43.204.2.84:7200/admin/banner",a).then(t=>{t.data.status==="success"&&(d(),u())}).catch(t=>{console.error("Error submitting banner:",t)}).finally(()=>C(!1))},d=()=>{h.get("http://43.204.2.84:7200/admin/banner").then(a=>{a.data.status==="success"&&Array.isArray(a.data.data)?g(a.data.data):g([])}).catch(a=>{console.error("Error fetching banners:",a),g([])})},E=(a,t)=>{h.patch(`http://43.204.2.84:7200/admin/banner/${a}/status`,{isActive:!t}).then(o=>{o.data.status==="success"&&d()}).catch(o=>{console.error("Error toggling banner status:",o)})},R=a=>{h.delete(`http://43.204.2.84:7200/admin/banner/${a}`).then(t=>{t.data.status==="success"&&(d(),m(!1))}).catch(t=>{console.error("Error deleting banner:",t)})},O=a=>{y(a),m(!0)},x=()=>{m(!1),y(null)};n.useEffect(()=>{d()},[]);const U=(a,t)=>{B(t)},F=a=>{T(parseInt(a.target.value,10)),B(0)};return e.jsxs("div",{className:"mt-12 mb-8 flex justify-center",children:[e.jsxs(s.Card,{className:"w-full max-w-6xl shadow-lg",children:[e.jsxs(s.CardHeader,{variant:"gradient",className:"bg-gradient-to-r from-blue-800 to-indigo-600 p-6 rounded-t-lg flex justify-between items-center",children:[e.jsx(s.Typography,{variant:"h5",color:"white",children:"Banner Management"}),e.jsx(s.Button,{color:"lightBlue",onClick:I,children:"Add Banner"})]}),e.jsxs(s.CardBody,{className:"p-6 space-y-6",children:[e.jsx(L,{children:e.jsxs(_,{children:[e.jsx(z,{children:e.jsxs(D,{children:[e.jsx(l,{children:"Sr. No."}),e.jsx(l,{children:"Image"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(H,{children:i&&i.length>0&&i.slice(c*r,c*r+r).map((a,t)=>e.jsxs(D,{children:[e.jsx(l,{children:c*r+t+1}),e.jsx(l,{children:e.jsx("img",{src:a.imageUrl,alt:"Banner",className:"w-32 h-32 object-cover rounded-md"})}),e.jsx(l,{children:e.jsx($,{checked:a.isActive,onChange:()=>E(a._id,a.isActive)})}),e.jsx(l,{children:e.jsx(s.Button,{color:"red",size:"small",onClick:()=>O(a._id),children:"Delete"})})]},a._id))})]})}),e.jsx(M,{rowsPerPageOptions:[5,10,25],component:"div",count:i.length,rowsPerPage:r,page:c,onPageChange:U,onRowsPerPageChange:F})]})]}),e.jsxs(s.Dialog,{open:N,handler:u,size:"lg",children:[e.jsx(s.DialogBody,{className:"overflow-y-auto overflow-x-hidden max-h-[500px]",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsx(s.Typography,{variant:"h4",className:"text-gray-800 font-semibold",children:"Upload New Banner"}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose Image"}),e.jsx("input",{type:"file",onChange:k,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 focus:outline-none"})]}),p&&e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(s.Typography,{variant:"h6",color:"blue-gray",className:"mb-2",children:"Image Preview"}),e.jsx("img",{src:p,alt:"Preview",className:"w-full h-auto object-cover rounded-md shadow-md"})]})]})}),e.jsxs(s.DialogFooter,{className:"flex justify-between",children:[e.jsx(s.Button,{variant:"outlined",color:"red",onClick:u,children:"Cancel"}),e.jsx(s.Button,{variant:"filled",color:"green",onClick:A,disabled:v,children:v?"Uploading...":"Submit"})]})]}),e.jsxs(q,{open:P,onClose:x,children:[e.jsx(s.DialogBody,{children:e.jsx(s.Typography,{variant:"h6",className:"text-gray-800",children:"Are you sure you want to delete this banner?"})}),e.jsxs(s.DialogFooter,{className:"gap-1",children:[e.jsx(s.Button,{variant:"outlined",color:"red",onClick:x,children:"Cancel"}),e.jsx(s.Button,{variant:"filled",color:"green",onClick:()=>{R(S),x()},children:"Delete"})]})]})]})};export{W as default};
