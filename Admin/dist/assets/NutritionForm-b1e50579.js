import{r as l,j as e,a as t,D as f,O as v,N as S,S as w}from"./index-a3fafb92.js";const C=({onAddNutrition:m,users:o,loading:p,error:i,handleCancel:j})=>{const[d,x]=l.useState(""),[n,u]=l.useState(""),[c,s]=l.useState(""),[r,g]=l.useState(""),y=a=>{if(a.preventDefault(),!d||!n||!c||!r)return;const b={userId:d,mealTime:n,description:c,quantity:r};f.post("http://43.204.2.84:7200/admin/nutrition",b).then(h=>{h.data.status==="success"&&(m(h.data.data),N())}).catch(h=>{console.error("Error submitting nutrition:",h)})},N=()=>{x(""),u(""),s(""),g("")};return e.jsxs("div",{className:"w-full p-6 border rounded-lg shadow-lg bg-white",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Add Nutrition Plan"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx("div",{children:e.jsx(t.Select,{label:"Select User",value:d,onChange:a=>x(a.target.value),required:!0,children:p?e.jsx(t.Option,{disabled:!0,children:"Loading users..."}):i?e.jsx(t.Option,{disabled:!0,children:"Error loading users"}):o.map(a=>e.jsx(t.Option,{value:a.id,children:a.name},a.id))})}),e.jsx("div",{children:e.jsxs(t.Select,{label:"Select Meal Time",value:n,onChange:a=>u(a.target.value),required:!0,children:[e.jsx(t.Option,{value:"Breakfast",children:"Breakfast"}),e.jsx(t.Option,{value:"Lunch",children:"Lunch"}),e.jsx(t.Option,{value:"Dinner",children:"Dinner"}),e.jsx(t.Option,{value:"Night",children:"Night"})]})}),e.jsx("div",{children:e.jsx(t.Textarea,{label:"Description",value:c,onChange:a=>s(a.target.value),required:!0})}),e.jsx("div",{children:e.jsx(t.Input,{label:"Quantity",value:r,type:"number",onChange:a=>g(a.target.value),required:!0})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(t.Button,{color:"red",variant:"outlined",ripple:!0,onClick:j,children:"Cancel"}),e.jsx(t.Button,{type:"submit",color:"green",ripple:!0,children:"Submit"})]})]})]})},O=()=>{const[m,o]=l.useState([]),[p,i]=l.useState(!1),{users:j,loading:d,error:x}=v(s=>s.users),n=S(),u=()=>{i(!1)};l.useEffect(()=>{n(w({})),f.get("http://43.204.2.84:7200/admin/nutrition").then(s=>{s.data.status==="success"&&o(s.data.data)}).catch(s=>{console.error("Error fetching nutrition data:",s)})},[n]);const c=s=>{o(r=>[...r,s]),i(!1)};return e.jsx("div",{className:"mt-12 mb-8 flex flex-col items-center",children:e.jsxs(t.Card,{className:"w-full max-w-6xl shadow-lg mb-6",children:[e.jsxs(t.CardHeader,{variant:"gradient",className:"bg-gradient-to-r from-red-800 to-indigo-600 p-6 rounded-t-lg flex justify-between items-center",children:[e.jsx(t.Typography,{variant:"h5",color:"white",children:"Nutrition Plans"}),e.jsx(t.Button,{color:"lightBlue",onClick:()=>i(!0),children:"Add Nutrition"})]}),p?e.jsx(e.Fragment,{children:e.jsx(C,{onAddNutrition:c,users:j,loading:d,error:x,handleCancel:u})}):e.jsx(t.CardBody,{className:"p-6 space-y-6",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"px-6 py-2 text-left text-sm font-medium text-gray-700",children:"Sr. No."}),e.jsx("th",{className:"px-6 py-2 text-left text-sm font-medium text-gray-700",children:"User"}),e.jsx("th",{className:"px-6 py-2 text-left text-sm font-medium text-gray-700",children:"Meal Time"}),e.jsx("th",{className:"px-6 py-2 text-left text-sm font-medium text-gray-700",children:"Dose"}),e.jsx("th",{className:"px-6 py-2 text-left text-sm font-medium text-gray-700",children:"Quantity"})]})}),e.jsx("tbody",{children:m.map((s,r)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-6 py-2 text-sm text-gray-600",children:r+1}),e.jsx("td",{className:"px-6 py-2 text-sm text-gray-600",children:s.userId}),e.jsx("td",{className:"px-6 py-2 text-sm text-gray-600",children:s.mealTime}),e.jsx("td",{className:"px-6 py-2 text-sm text-gray-600",children:s.dose}),e.jsx("td",{className:"px-6 py-2 text-sm text-gray-600",children:s.quantity})]},s._id))})]})})]})})};export{O as default};
