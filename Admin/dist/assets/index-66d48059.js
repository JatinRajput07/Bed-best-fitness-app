import{r as l,j as e,a,A as m,_ as v}from"./index-4e0354f5.js";import{T as w}from"./TrashIcon-a030f79c.js";import{a as F}from"./TablePagination-a1f69fa3.js";import"./Paper-3b57d797.js";import"./assertThisInitialized-b01dd5f6.js";const _=()=>{const[t,N]=l.useState([]),[p,i]=l.useState(null),[x,c]=l.useState(null),[C,y]=l.useState(!1),[f,b]=l.useState(!1),[d,o]=l.useState(null),[g,j]=l.useState(0),[n,P]=l.useState(5),h=()=>{m.get("/admin/highlights").then(s=>{s.data.status==="success"&&N(s.data.data.highlights)}).catch(s=>{console.error("Error fetching images:",s)})};l.useEffect(()=>{h()},[]);const I=s=>{const r=s.target.files[0];i(r);const R=URL.createObjectURL(r);c(R)},D=()=>{i(null),c(null),y(!0)},u=()=>{i(null),c(null),y(!1)},S=()=>{if(!p)return;b(!0);const s=new FormData;s.append("image",p),m.post("/admin/highlights",s).then(r=>{r.data.status==="success"&&(h(),u(),v.success("Image uploaded successfully!"))}).catch(r=>{console.error("Error uploading image:",r)}).finally(()=>b(!1))},T=()=>{d&&m.delete(`/admin/highlights/${d}`).then(s=>{s.data.status==="success"&&(h(),v.success("Image deleted successfully!"))}).catch(s=>{console.error("Error deleting image:",s)}).finally(()=>o(null))},k=(s,r)=>{j(r)},B=s=>{P(parseInt(s.target.value,10)),j(0)};return e.jsxs("div",{className:"mt-12 mb-8 flex justify-center",children:[e.jsxs(a.Card,{className:"w-full max-w-6xl shadow-lg",children:[e.jsxs(a.CardHeader,{variant:"gradient",color:"gray",className:"mb-8 p-6 flex justify-between items-center",children:[e.jsx(a.Typography,{variant:"h5",color:"white",children:"Highlights Gallery"}),e.jsx(a.Button,{color:"lightGreen",onClick:D,children:"Add Image"})]}),e.jsxs(a.CardBody,{className:"p-6 space-y-6",children:[(t==null?void 0:t.length)>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t==null?void 0:t.slice(g*n,g*n+n).map(s=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s==null?void 0:s.url,alt:"Highlight",className:"w-full rounded-lg shadow-md",style:{aspectRatio:"16/9",objectFit:"cover"}}),e.jsx("div",{className:"absolute bg-deep-orange-500 p-1 right-2 rounded text-white top-2",children:e.jsx(w,{onClick:()=>o(s._id),className:"h-5 w-5 text-white cursor-pointer"})})]},s._id))}):e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"text-center font-semibold",children:"No data found"}),(t==null?void 0:t.length)>0&&e.jsx(F,{rowsPerPageOptions:[5,10,25],component:"div",count:t==null?void 0:t.length,rowsPerPage:n,page:g,onPageChange:k,onRowsPerPageChange:B})]})]}),e.jsxs(a.Dialog,{open:C,handler:u,size:"lg",className:"rounded-lg shadow-lg",children:[e.jsxs(a.DialogBody,{className:"p-6 max-h-[80vh] overflow-y-auto",children:[e.jsx(a.Typography,{variant:"h4",color:"blue-gray",className:"text-center mb-6 font-semibold sticky top-0 bg-white py-2 z-10",children:"Upload a New Highlight Image"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-blue-gray-300 rounded-lg p-6 hover:border-blue-gray-500 focus-within:ring focus-within:ring-blue-400 transition",children:[e.jsxs("label",{htmlFor:"file-upload",className:"block text-center text-blue-gray-700 cursor-pointer hover:text-blue-600 transition",children:[e.jsx(a.Typography,{variant:"h6",className:"mb-2 font-semibold",children:"Click to Select Image File (Recommended ratio 16:9)"}),e.jsx(a.Typography,{variant:"small",color:"gray",children:"Supported formats: .jpg, .png"})]}),e.jsx("input",{id:"file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:I,required:!0})]}),x&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(a.Typography,{variant:"h6",className:"mb-2 font-semibold text-blue-gray-700",children:"Image Preview"}),e.jsx("img",{src:x,alt:"Preview",className:"w-full rounded-xl shadow-lg border border-blue-gray-200",style:{aspectRatio:"16/9",objectFit:"cover",maxHeight:"400px"}})]})]})]}),e.jsxs(a.DialogFooter,{className:"p-6 flex justify-between sticky bottom-0 bg-white",children:[e.jsx(a.Button,{variant:"outlined",color:"red",onClick:u,className:"rounded-lg px-6 py-2 border-red-500 text-red-500 hover:bg-red-100",children:"Cancel"}),e.jsx(a.Button,{variant:"gradient",color:"green",onClick:S,disabled:f,className:"rounded-lg px-6 py-2",children:f?"Uploading...":"Submit"})]})]}),e.jsxs(a.Dialog,{open:!!d,handler:()=>o(null),children:[e.jsx(a.DialogHeader,{className:"bg-gray-100 text-center py-4",children:e.jsx(a.Typography,{variant:"h5",color:"blue-gray",className:"font-semibold",children:"Confirm Deletion"})}),e.jsxs(a.DialogBody,{className:"flex flex-col items-center gap-6 p-6",children:[e.jsx("div",{className:"p-4 rounded-full bg-red-100 flex justify-center items-center",children:e.jsx(w,{className:"h-10 w-10 text-red-500"})}),e.jsx(a.Typography,{className:"text-center text-base font-medium text-blue-gray-600",children:"Are you sure you want to delete this image?"})]}),e.jsxs(a.DialogFooter,{className:"bg-gray-50 flex justify-center gap-4 py-4",children:[e.jsx(a.Button,{variant:"outlined",color:"blue-gray",className:"w-24",onClick:()=>o(null),children:"Cancel"}),e.jsx(a.Button,{variant:"gradient",color:"red",className:"w-24",onClick:T,children:"Confirm"})]})]})]})};export{_ as default};
