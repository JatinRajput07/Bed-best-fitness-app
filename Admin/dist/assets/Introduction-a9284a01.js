import{r as n,j as e,a as t,A as d}from"./index-3a9bc31f.js";import{S as H,N as U,P as F,a as V,b as _,D as L}from"./pagination-34210ca6.js";import{T as $,a as q,b as G,c as N,d as J}from"./TableRow-a46a7a3b.js";import{T as l,a as K}from"./TablePagination-d04aed2f.js";import"./Paper-d2682258.js";import"./assertThisInitialized-7f364730.js";const ae=()=>{const[h,I]=n.useState([]),[g,x]=n.useState(null),[r,j]=n.useState(null),[S,p]=n.useState(!1),[D,f]=n.useState(!1),[P,v]=n.useState(null),[b,w]=n.useState(!1),[i,y]=n.useState(0),[o,T]=n.useState(5),c=()=>{d.get("/admin/introduction").then(a=>{a.data.status==="success"&&Array.isArray(a.data.data)&&I(a.data.data)}).catch(a=>console.error("Error fetching introductions:",a))};n.useEffect(()=>{c()},[]);const C=a=>{const s=a.target.files[0];x(s),j(URL.createObjectURL(s))},B=()=>p(!0),m=()=>{x(null),j(null),p(!1)},A=a=>{v(a),f(!0)},u=()=>{f(!1),v(null)},R=()=>{if(!g)return;w(!0);const a=new FormData;a.append("image",g),d.post("/admin/introduction",a).then(s=>{s.data.status==="success"&&(c(),m())}).catch(s=>console.error("Error creating introduction:",s)).finally(()=>w(!1))},k=(a,s)=>{d.patch(`/admin/introduction/${a}/status`,{isActive:!s}).then(()=>c()).catch(z=>console.error("Error toggling introduction status:",z))},E=a=>{d.delete(`/admin/introduction/${a}`).then(()=>{c(),u()}).catch(s=>console.error("Error deleting introduction:",s))},M=(a,s)=>y(s),O=a=>{T(parseInt(a.target.value,10)),y(0)};return e.jsxs("div",{className:"mt-12 mb-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(t.Typography,{variant:"h5",className:"mb-4 font-bold text-center",children:"Active Introduction Screens"}),e.jsx(H,{navigation:!0,pagination:{clickable:!0},modules:[U,F],style:{width:"10%",height:"auto"},className:"h-64",children:h.filter(a=>a.isActive).map(a=>e.jsx(V,{children:e.jsx("img",{src:a.imageUrl,alt:"Introduction",className:"w-full h-full object-cover rounded-md"})},a._id))})]}),e.jsxs(t.Card,{className:"w-full shadow-lg",children:[e.jsxs(t.CardHeader,{className:"p-6 bg-blue-600 text-white flex justify-between",children:[e.jsx(t.Typography,{variant:"h5",children:"Introduction Management"}),e.jsx(t.Button,{onClick:B,children:"Add Introduction"})]}),e.jsxs(t.CardBody,{className:"p-6",children:[e.jsx($,{children:e.jsxs(q,{children:[e.jsx(G,{children:e.jsxs(N,{children:[e.jsx(l,{children:"Sr. No."}),e.jsx(l,{children:"Image"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(J,{children:h.slice(i*o,i*o+o).map((a,s)=>e.jsxs(N,{children:[e.jsx(l,{children:i*o+s+1}),e.jsx(l,{children:e.jsx("img",{src:a.imageUrl,alt:"Introduction",className:"w-32 h-32 object-cover rounded-md"})}),e.jsx(l,{children:e.jsx(_,{checked:a.isActive,onChange:()=>k(a._id,a.isActive)})}),e.jsx(l,{children:e.jsx(t.Button,{color:"red",onClick:()=>A(a._id),children:"Delete"})})]},a._id))})]})}),e.jsx(K,{rowsPerPageOptions:[5,10,25],component:"div",count:h.length,rowsPerPage:o,page:i,onPageChange:M,onRowsPerPageChange:O})]})]}),e.jsxs(t.Dialog,{open:S,handler:m,children:[e.jsxs(t.DialogBody,{className:"flex flex-col items-center",children:[e.jsx(t.Typography,{variant:"h4",className:"mb-4",children:"Add New Introduction"}),e.jsxs("div",{className:"mb-4 w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Introduction Image (Recommended: 1920x768px, 5:2 ratio, Max: 2MB)"}),e.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-400 rounded-lg p-4",children:[e.jsx("input",{type:"file",id:"image-upload",className:"hidden",onChange:C,accept:"image/*","max-size":"2097152"}),e.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer w-full",children:r?e.jsx("div",{className:"relative w-full",style:{paddingTop:"40%"},children:e.jsx("img",{src:r,alt:"Banner Preview",className:"absolute top-0 left-0 w-full h-full object-cover rounded-lg"})}):e.jsxs("div",{className:"flex flex-col items-center py-8",children:[e.jsx("span",{className:"text-4xl text-primary",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-10 h-10",children:e.jsx("path",{fillRule:"evenodd",d:"M7 4a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v1h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2V4zm1 2v1h8V6H8zm-2 3v8h12V9H6zm6 1a3 3 0 1 1 0 6 3 3 0 0 1 0-6z",clipRule:"evenodd"})})}),e.jsx(t.Typography,{variant:"small",className:"mt-2 text-gray-600",children:"Select Image (1920x768px recommended, max 2MB)"})]})})]})]}),e.jsx(t.Input,{type:"file",onChange:C}),r&&e.jsx("div",{className:"mt-4 max-h-64 overflow-auto",children:e.jsx("img",{src:r,alt:"Preview",className:"w-full h-auto rounded-md object-contain max-h-64"})})]}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{onClick:m,color:"red",children:"Cancel"}),e.jsx(t.Button,{onClick:R,color:"green",disabled:b,children:b?"Uploading...":"Submit"})]})]}),e.jsxs(L,{open:D,onClose:u,children:[e.jsx(t.DialogBody,{children:e.jsx(t.Typography,{children:"Are you sure you want to delete this introduction?"})}),e.jsxs(t.DialogFooter,{children:[e.jsx(t.Button,{onClick:u,color:"red",children:"Cancel"}),e.jsx(t.Button,{onClick:()=>E(P),color:"green",children:"Delete"})]})]})]})};export{ae as default};
