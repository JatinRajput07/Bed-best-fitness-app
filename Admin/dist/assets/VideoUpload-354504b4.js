import{K as O,y as U,z as H,r as t,j as e,a as i,M as I,N as F,G as R,O as $}from"./index-a60bac1d.js";import{S as E}from"./react-select.esm-c1cdf66e.js";import"./assertThisInitialized-6b736fd0.js";const z=()=>{var k,C;const q=O(),m=U(),{progress:u,error:x}=H(l=>l.videos),[d,y]=t.useState(""),[j,w]=t.useState(""),[a,N]=t.useState(null),[S,v]=t.useState([]),[b,c]=t.useState(null),[g,p]=t.useState(null),[s,n]=t.useState({}),[T,h]=t.useState(!1),P=[{value:"workout-video",label:"Workout Video"},{value:"recipe-video",label:"Recipe Video"},{value:"knowledge-video",label:"Knowledge Video"},{value:"story-podcast-recognition-video",label:"Story/Podcast/Recognition Video"},{value:"wallpaper",label:"Wallpaper"},{value:"quotes",label:"Quotes"},{value:"audio-clips",label:"Audio Clips"},{value:"music",label:"Music"},{value:"podcast",label:"Podcast"},{value:"audio-book",label:"Audio Book"}],B={"workout-video":[{value:"body",label:"Body"},{value:"neck-pain",label:"Neck Pain"},{value:"upper-body",label:"Upper Body"},{value:"lower-body",label:"Lower Body"}],"recipe-video":[{value:"breakfast",label:"Breakfast"},{value:"lunch",label:"Lunch"},{value:"dinner",label:"Dinner"}],"knowledge-video":[{value:"nutrition-diet",label:"Nutrition Diet"},{value:"skin-care",label:"Skin Care"},{value:"sleep",label:"Sleep"}],"story-podcast-recognition-video":[{value:"story",label:"Story"},{value:"podcast",label:"Podcast"}],wallpaper:[{value:"nature",label:"Nature"},{value:"motivation",label:"Motivation"},{value:"god",label:"God"}],quotes:[{value:"friendship",label:"Friendship"},{value:"motivation",label:"Motivation"},{value:"success",label:"Success"}],"audio-clips":[{value:"new",label:"New"},{value:"tophits",label:"Top Hits"},{value:"trending",label:"Trending"}],music:[{value:"new",label:"New"},{value:"tophits",label:"Top Hits"},{value:"trending",label:"Trending"}],podcast:[{value:"new",label:"New"},{value:"motivation",label:"Motivation"},{value:"educational",label:"Educational"}],"audio-book":[{value:"new",label:"New"},{value:"popular",label:"Most Popular"},{value:"health_wellness",label:"Health & Wellness"}]},f={"workout-video":["video/mp4","video/avi","video/mov"],"recipe-video":["video/mp4","video/avi","video/mov"],"knowledge-video":["video/mp4","video/avi","video/mov"],"story-podcast-recognition-video":["video/mp4","audio/mpeg"],wallpaper:["image/jpeg","image/png","image/jpg"],quotes:["image/jpeg","image/png","image/jpg"],"audio-clips":["audio/mpeg","audio/wav"],music:["audio/mpeg","audio/wav"],podcast:["audio/mpeg","audio/wav"],"audio-book":["audio/mpeg","audio/wav"]},D=l=>{const o=l.target.files[0];o&&f[a.value].includes(o.type)?(c(o),n(r=>({...r,file:null}))):(c(null),n(r=>({...r,file:`Invalid file type. Only ${f[a.value].join(", ")} files are allowed.`})))},M=l=>{const o=l.target.files[0];o&&o.type.startsWith("image/")?(p(o),n(r=>({...r,audioThumbnail:null}))):(p(null),n(r=>({...r,audioThumbnail:"Invalid image type for audio thumbnail."})))},V=()=>{var o;const l={};return d||(l.title="Title is required."),a||(l.category="Category is required."),b||(l.file="File is required."),(o=a==null?void 0:a.value)!=null&&o.includes("audio")&&!g&&(l.audioThumbnail="Audio thumbnail image is required for audio files."),n(l),Object.keys(l).length===0},A=async l=>{if(l.preventDefault(),!!V()){h(!0);try{await m(I({title:d,file:b,category:a.value,subcategories:S,description:j,audioThumbnail:g})).then(o=>{o.meta.requestStatus==="fulfilled"&&(F.showSuccessToast("File uploaded successfully!"),q("/dashboard/videos"),m(R()),y(""),w(""),N(null),v([]),c(null),p(null),h(!1),m($()))})}catch(o){console.error(o),F.showErrorToast("Failed to upload video."),h(!1)}}},W=!d||!a||!b||((k=a==null?void 0:a.value)==null?void 0:k.includes("audio"))&&!g||T||u>0&&u<100;return e.jsx("div",{className:"mt-12 mb-8 flex justify-center",children:e.jsxs(i.Card,{className:"w-full max-w-4 shadow-lg",children:[e.jsx(i.CardHeader,{variant:"gradient",className:"bg-gradient-to-r from-red-800  to-indigo-600 p-6 rounded-t-lg",children:e.jsx(i.Typography,{variant:"h5",color:"white",className:"text-center",children:"Upload File"})}),e.jsxs(i.CardBody,{className:"p-6 space-y-6",children:[x&&e.jsx(i.Typography,{color:"red",className:"text-sm",children:x}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx(E,{value:a,onChange:l=>{N(l),v([]),c(null),p(null)},options:P,placeholder:"Select a category",isClearable:!0,className:"focus:ring focus:ring-indigo-500"}),s.category&&e.jsx(i.Typography,{color:"red",className:"text-sm mt-1",children:s.category})]}),a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategories"}),e.jsx(E,{value:S,onChange:l=>v(l||[]),options:B[a.value],placeholder:"Select subcategories",className:"focus:ring focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:d,onChange:l=>y(l.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-indigo-500",placeholder:"Enter title"}),s.title&&e.jsx(i.Typography,{color:"red",className:"text-sm mt-1",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:j,onChange:l=>w(l.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-indigo-500",placeholder:"Enter description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File"}),e.jsx("input",{type:"file",onChange:D,accept:(C=f[a==null?void 0:a.value])==null?void 0:C.join(", "),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-indigo-500"}),s.file&&e.jsx(i.Typography,{color:"red",className:"text-sm mt-1",children:s.file})]}),["audio","music","podcast","story"].some(l=>{var o;return(o=a==null?void 0:a.value)==null?void 0:o.includes(l)})&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Audio Thumbnail (Image)"}),e.jsx("input",{type:"file",onChange:M,accept:"image/*",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-indigo-500"}),s.audioThumbnail&&e.jsx(i.Typography,{color:"red",className:"text-sm mt-1",children:s.audioThumbnail})]}),u>0&&e.jsx("div",{children:e.jsx(i.Progress,{value:u,color:"indigo"})}),e.jsx(i.Button,{color:"indigo",fullWidth:!0,onClick:A,disabled:W,children:T?u>0?`Uploading... ${u}%`:"Please Wait...":"Upload File"})]})]})})};export{z as default};
