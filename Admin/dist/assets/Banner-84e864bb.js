import{r as t,j as e,a as n,A as c}from"./index-432a8273.js";import{S as F,N as L,P as H,a as M,b as $,D as q}from"./pagination-1a551876.js";import{T as z,a as G,b as J,c as v,d as K}from"./TableRow-1593fe24.js";import{T as r,a as Q}from"./TablePagination-64ad1274.js";import"./Paper-cc146198.js";import"./assertThisInitialized-00109c2c.js";const ae=()=>{const[d,D]=t.useState([]),[m,u]=t.useState(null),[x,j]=t.useState(null),[y,p]=t.useState(!1),[P,f]=t.useState(!1),[S,b]=t.useState(null),[C,w]=t.useState(!1),[o,B]=t.useState(0),[l,N]=t.useState(5),i=()=>{c.get("/admin/banner").then(a=>{a.data.status==="success"&&Array.isArray(a.data.data)&&D(a.data.data)}).catch(a=>console.error("Error fetching banners:",a))};t.useEffect(()=>{i()},[]);const A=a=>{const s=a.target.files[0];u(s),j(URL.createObjectURL(s))},T=()=>p(!0),h=()=>{u(null),j(null),p(!1)},k=a=>{b(a),f(!0)},g=()=>{f(!1),b(null)},I=()=>{if(!m)return;w(!0);const a=new FormData;a.append("image",m),c.post("/admin/banner",a).then(s=>{s.data.status==="success"&&(i(),h())}).catch(s=>console.error("Error creating banner:",s)).finally(()=>w(!1))},E=(a,s)=>{c.patch(`/admin/banner/${a}/status`,{isActive:!s}).then(()=>i()).catch(_=>console.error("Error toggling banner status:",_))},R=a=>{c.delete(`/admin/banner/${a}`).then(()=>{i(),g()}).catch(s=>console.error("Error deleting banner:",s))},O=(a,s)=>B(s),U=a=>{N(parseInt(a.target.value,10)),B(0)};return e.jsxs("div",{className:"mt-12 mb-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(n.Typography,{variant:"h5",className:"mb-4 font-bold text-center",children:"Active Banners"}),e.jsx(F,{navigation:!0,pagination:{clickable:!0},modules:[L,H],className:"h-64",children:d.filter(a=>a.isActive).map(a=>e.jsx(M,{children:e.jsx("img",{src:a.imageUrl,alt:"Banner",className:"w-full h-full object-cover rounded-md"})},a._id))})]}),e.jsxs(n.Card,{className:"w-full shadow-lg",children:[e.jsxs(n.CardHeader,{className:"p-6 bg-blue-600 text-white flex justify-between",children:[e.jsx(n.Typography,{variant:"h5",children:"Banner Management"}),e.jsx(n.Button,{onClick:T,children:"Add Banner"})]}),e.jsxs(n.CardBody,{className:"p-6",children:[e.jsx(z,{children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(r,{children:"Sr. No."}),e.jsx(r,{children:"Image"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(K,{children:d.slice(o*l,o*l+l).map((a,s)=>e.jsxs(v,{children:[e.jsx(r,{children:o*l+s+1}),e.jsx(r,{children:e.jsx("img",{src:a.imageUrl,alt:"Banner",className:"w-32 h-32 object-cover rounded-md"})}),e.jsx(r,{children:e.jsx($,{checked:a.isActive,onChange:()=>E(a._id,a.isActive)})}),e.jsx(r,{children:e.jsx(n.Button,{color:"red",onClick:()=>k(a._id),children:"Delete"})})]},a._id))})]})}),e.jsx(Q,{rowsPerPageOptions:[5,10,25],component:"div",count:d.length,rowsPerPage:l,page:o,onPageChange:O,onRowsPerPageChange:U})]})]}),e.jsxs(n.Dialog,{open:y,handler:h,children:[e.jsxs(n.DialogBody,{className:"flex flex-col items-center",children:[e.jsx(n.Typography,{variant:"h4",className:"mb-4",children:"Add New Banner"}),e.jsx(n.Input,{type:"file",onChange:A}),x&&e.jsx("div",{className:"mt-4 max-h-64 overflow-auto",children:e.jsx("img",{src:x,alt:"Preview",className:"w-full h-auto rounded-md object-contain max-h-64"})})]}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{onClick:h,color:"red",children:"Cancel"}),e.jsx(n.Button,{onClick:I,color:"green",disabled:C,children:C?"Uploading...":"Submit"})]})]}),e.jsxs(q,{open:P,onClose:g,children:[e.jsx(n.DialogBody,{children:e.jsx(n.Typography,{children:"Are you sure you want to delete this banner?"})}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{onClick:g,color:"red",children:"Cancel"}),e.jsx(n.Button,{onClick:()=>R(S),color:"green",children:"Delete"})]})]})]})};export{ae as default};
