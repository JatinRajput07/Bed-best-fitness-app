import{r as s,j as e,a,A as c}from"./index-3ad77159.js";import{S as F,N as L,P as H,a as M,b as $,D as q}from"./pagination-029ae1c5.js";import{T as z,a as G,b as J,c as I,d as K}from"./TableRow-7b6f424e.js";import{T as o,a as Q}from"./TablePagination-e7ac6687.js";import"./Paper-b8e3325c.js";import"./assertThisInitialized-bae4ed65.js";const te=()=>{const[d,y]=s.useState([]),[g,m]=s.useState(null),[x,j]=s.useState(null),[D,p]=s.useState(!1),[S,f]=s.useState(!1),[P,C]=s.useState(null),[b,w]=s.useState(!1),[i,v]=s.useState(0),[r,N]=s.useState(5),l=()=>{c.get("/admin/introduction").then(t=>{t.data.status==="success"&&Array.isArray(t.data.data)&&y(t.data.data)}).catch(t=>console.error("Error fetching introductions:",t))};s.useEffect(()=>{l()},[]);const A=t=>{const n=t.target.files[0];m(n),j(URL.createObjectURL(n))},T=()=>p(!0),h=()=>{m(null),j(null),p(!1)},B=t=>{C(t),f(!0)},u=()=>{f(!1),C(null)},k=()=>{if(!g)return;w(!0);const t=new FormData;t.append("image",g),c.post("/admin/introduction",t).then(n=>{n.data.status==="success"&&(l(),h())}).catch(n=>console.error("Error creating introduction:",n)).finally(()=>w(!1))},E=(t,n)=>{c.patch(`/admin/introduction/${t}/status`,{isActive:!n}).then(()=>l()).catch(_=>console.error("Error toggling introduction status:",_))},R=t=>{c.delete(`/admin/introduction/${t}`).then(()=>{l(),u()}).catch(n=>console.error("Error deleting introduction:",n))},O=(t,n)=>v(n),U=t=>{N(parseInt(t.target.value,10)),v(0)};return e.jsxs("div",{className:"mt-12 mb-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(a.Typography,{variant:"h5",className:"mb-4 font-bold text-center",children:"Active Introduction Screens"}),e.jsx(F,{navigation:!0,pagination:{clickable:!0},modules:[L,H],style:{width:"10%",height:"auto"},className:"h-64",children:d.filter(t=>t.isActive).map(t=>e.jsx(M,{children:e.jsx("img",{src:t.imageUrl,alt:"Introduction",className:"w-full h-full object-cover rounded-md"})},t._id))})]}),e.jsxs(a.Card,{className:"w-full shadow-lg",children:[e.jsxs(a.CardHeader,{className:"p-6 bg-blue-600 text-white flex justify-between",children:[e.jsx(a.Typography,{variant:"h5",children:"Introduction Management"}),e.jsx(a.Button,{onClick:T,children:"Add Introduction"})]}),e.jsxs(a.CardBody,{className:"p-6",children:[e.jsx(z,{children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs(I,{children:[e.jsx(o,{children:"Sr. No."}),e.jsx(o,{children:"Image"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Actions"})]})}),e.jsx(K,{children:d.slice(i*r,i*r+r).map((t,n)=>e.jsxs(I,{children:[e.jsx(o,{children:i*r+n+1}),e.jsx(o,{children:e.jsx("img",{src:t.imageUrl,alt:"Introduction",className:"w-32 h-32 object-cover rounded-md"})}),e.jsx(o,{children:e.jsx($,{checked:t.isActive,onChange:()=>E(t._id,t.isActive)})}),e.jsx(o,{children:e.jsx(a.Button,{color:"red",onClick:()=>B(t._id),children:"Delete"})})]},t._id))})]})}),e.jsx(Q,{rowsPerPageOptions:[5,10,25],component:"div",count:d.length,rowsPerPage:r,page:i,onPageChange:O,onRowsPerPageChange:U})]})]}),e.jsxs(a.Dialog,{open:D,handler:h,children:[e.jsxs(a.DialogBody,{className:"flex flex-col items-center",children:[e.jsx(a.Typography,{variant:"h4",className:"mb-4",children:"Add New Introduction"}),e.jsx(a.Input,{type:"file",onChange:A}),x&&e.jsx("div",{className:"mt-4 max-h-64 overflow-auto",children:e.jsx("img",{src:x,alt:"Preview",className:"w-full h-auto rounded-md object-contain max-h-64"})})]}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{onClick:h,color:"red",children:"Cancel"}),e.jsx(a.Button,{onClick:k,color:"green",disabled:b,children:b?"Uploading...":"Submit"})]})]}),e.jsxs(q,{open:S,onClose:u,children:[e.jsx(a.DialogBody,{children:e.jsx(a.Typography,{children:"Are you sure you want to delete this introduction?"})}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{onClick:u,color:"red",children:"Cancel"}),e.jsx(a.Button,{onClick:()=>R(P),color:"green",children:"Delete"})]})]})]})};export{te as default};
