import{y as C,z as h,r,D as E,Q as A,j as s,a as t,S as U}from"./index-a60bac1d.js";import{S as _}from"./react-select.esm-c1cdf66e.js";import"./assertThisInitialized-6b736fd0.js";const L=()=>{const a=C(),{users:o,loading:p,error:x}=h(e=>e.users),{assignments:d,loading:f,error:j}=h(e=>e.assignments),[i,m]=r.useState(null),[c,u]=r.useState([]),[n,g]=r.useState({});r.useEffect(()=>{a(E({})),a(A())},[a]);const y=o.filter(e=>e.role==="host"),b=r.useMemo(()=>{const e=d.flatMap(l=>l.asign_user.map(N=>N._id));return o.filter(l=>!e.includes(l._id)&&l.role==="user")},[d,o]).map(e=>({value:e._id,label:`${e.name} (${e.email})`})),S=()=>{const e={};return i||(e.host="Host is required."),c.length===0&&(e.users="At least one user is required."),g(e),Object.keys(e).length===0},v=()=>{S()&&(a(U({host:i,asign_user:c.map(e=>e.value)})),alert("Assignment created successfully!"),m(null),u([]),g({}))};return p||f?s.jsx(t.Typography,{className:"text-center mt-6",children:"Loading..."}):x||j?s.jsx(t.Typography,{className:"text-center mt-6 text-red-500",children:"Error loading data. Please try again."}):s.jsx("div",{className:"mt-12 mb-8 flex flex-col gap-12",children:s.jsxs(t.Card,{children:[s.jsx(t.CardHeader,{variant:"gradient",color:"gray",className:"mb-4 p-6",children:s.jsx(t.Typography,{variant:"h6",color:"white",children:"Create Assignment"})}),s.jsxs(t.CardBody,{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Host"}),s.jsxs("select",{value:i||"",onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-indigo-500",children:[s.jsx("option",{value:"",disabled:!0,children:"Select Host"}),y.map(e=>s.jsx("option",{value:e._id,children:e.name},e._id))]}),n.host&&s.jsx(t.Typography,{color:"red",className:"text-sm mt-1",children:n.host})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Users"}),s.jsx(_,{isMulti:!0,options:b,value:c,onChange:e=>u(e||[]),placeholder:"Select users"}),n.users&&s.jsx(t.Typography,{color:"red",className:"text-sm mt-1",children:n.users})]}),s.jsx(t.Button,{color:"blue",onClick:v,children:"Create Assignment"})]})]})})};export{L as default};
