import{r as l,j as e,a as s,A as M,_ as F}from"./index-ae902f8e.js";import{T as H,a as $,b as J,c as B,d as n,e as K,f as Q}from"./TableRow-6309bc8f.js";import"./Paper-ebb13e5c.js";import"./assertThisInitialized-b0c622ce.js";const Z=()=>{const[w,T]=l.useState(null),[j,r]=l.useState(""),[i,c]=l.useState([]),[o,d]=l.useState(""),[p,g]=l.useState(""),[E,D]=l.useState(!1),[S,h]=l.useState(null),[P,k]=l.useState(!1),[N,A]=l.useState([]),[f,L]=l.useState(0),[u,U]=l.useState(5),[x,b]=l.useState(null),_=t=>{const a=t.target.files[0];T(a);const m=URL.createObjectURL(a);h(m)},R=t=>{c(a=>a.includes(t)?a.filter(m=>m!==t):[...a,t])},I=(t=null)=>{t?(b(t),r(t.googleMeetLink),c(t.roles[0].split(",")),d(t.meetingDate),g(t.meetingTime),h(t.image)):(b(null),r(""),c([]),d(""),g(""),h(null)),D(!0)},C=()=>{T(null),r(""),c([]),d(""),g(""),h(null),D(!1),b(null)},O=()=>{if(!j||i.length===0||!o||!p)return;k(!0);const t=new FormData;t.append("googleMeetLink",j),t.append("roles",i),t.append("meetingDate",o),t.append("meetingTime",p),w&&t.append("image",w);const a=x?`/admin/updateMeeting/${x._id}`:"/admin/createMeeting";M[x?"put":"post"](a,t).then(y=>{y.data.status==="success"&&(v(),C())}).catch(y=>{console.error("Error submitting meeting:",y)}).finally(()=>k(!1))},v=()=>{M.get("/admin/getMeeting").then(t=>{t.data.status==="success"&&A(t.data.meeting)}).catch(t=>{console.error("Error fetching meetings:",t)})};l.useEffect(()=>{v()},[]);const q=t=>{M.delete(`/admin/deleteMeeting/${t}`).then(a=>{a.data.status==="success"&&(v(),F.success("Meeting Deleted!"))}).catch(a=>{console.error("Error deleting meeting:",a)})},z=(t,a)=>{L(a)},G=t=>{U(parseInt(t.target.value,10)),L(0)};return e.jsxs("div",{className:"mt-12 mb-8 flex justify-center",children:[e.jsxs(s.Card,{className:"w-full max-w-6xl shadow-lg",children:[e.jsxs(s.CardHeader,{variant:"gradient",className:"bg-gradient-to-r from-blue-800 to-indigo-600 p-6 rounded-t-lg flex justify-between items-center",children:[e.jsx(s.Typography,{variant:"h5",color:"white",children:"Meeting"}),e.jsx(s.Button,{color:"lightBlue",onClick:()=>I(),children:"Add Meeting"})]}),e.jsxs(s.CardBody,{className:"p-6 space-y-6",children:[e.jsx(H,{children:e.jsxs($,{children:[e.jsx(J,{children:e.jsxs(B,{children:[e.jsx(n,{children:"Sr. No."}),e.jsx(n,{children:"Image"}),e.jsx(n,{children:"Google Meet Link"}),e.jsx(n,{children:"Date"}),e.jsx(n,{children:"Time"}),e.jsx(n,{children:"Roles"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(K,{children:N.slice(f*u,f*u+u).map((t,a)=>e.jsxs(B,{children:[e.jsx(n,{children:a+1}),e.jsx(n,{children:e.jsx("img",{src:t.image,alt:"Meeting",className:"w-16 h-16 object-cover"})}),e.jsx(n,{children:t.googleMeetLink}),e.jsx(n,{children:new Date(t.createdAt).toLocaleDateString()}),e.jsx(n,{children:new Date(t.createdAt).toLocaleTimeString()}),e.jsx(n,{children:t.roles.join(", ")}),e.jsxs(n,{children:[e.jsx(s.Button,{size:"sm",color:"green",className:"mr-1",onClick:()=>I(t),children:"Edit"}),e.jsx(s.Button,{size:"sm",color:"red",onClick:()=>q(t._id),children:"Delete"})]})]},t._id))})]})}),e.jsx(Q,{rowsPerPageOptions:[5,10,25],component:"div",count:N.length,rowsPerPage:u,page:f,onPageChange:z,onRowsPerPageChange:G})]})]}),e.jsxs(s.Dialog,{open:E,handler:C,size:"lg",children:[e.jsx(s.DialogBody,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(s.Typography,{variant:"h6",className:"text-center mb-4",children:x?"Edit Meeting":"Add Meeting"}),e.jsx(s.Input,{label:"Google Meet Link",value:j,onChange:t=>r(t.target.value),required:!0}),e.jsx(s.Input,{type:"file",onChange:_,label:"Upload Image"}),S&&e.jsxs("div",{className:"mt-4",children:[e.jsx(s.Typography,{variant:"h6",color:"gray",className:"mb-2",children:"Image Preview"}),e.jsx("img",{src:S,alt:"Preview",className:"w-32 h-32 object-cover rounded-md"})]}),e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"h6",className:"text-gray-700",children:"Select Roles"}),console.log(i,i.includes("user")),e.jsx(s.Checkbox,{label:"User",checked:i.includes("user"),onChange:()=>R("user")}),e.jsx(s.Checkbox,{label:"Coach",checked:i.includes("coach"),onChange:()=>R("coach")})]}),e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"h6",className:"text-gray-700",children:"Select Meeting Date and Time"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(s.Input,{type:"date",label:"Date",value:o==null?void 0:o.split("T")[0],onChange:t=>d(t.target.value),required:!0}),e.jsx(s.Input,{type:"time",label:"Time",value:p,onChange:t=>g(t.target.value),required:!0})]})]})]})}),e.jsxs(s.DialogFooter,{children:[e.jsx(s.Button,{color:"red",onClick:C,children:"Cancel"}),e.jsx(s.Button,{color:" ",onClick:O,disabled:P,children:P?"Please wait...":"Submit"})]})]})]})};export{Z as default};
